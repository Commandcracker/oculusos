--[[
--(c) 2013 Felix Maxwell
--License: CC BY-SA 3.0
https://creativecommons.org/licenses/by-sa/3.0
]]
local a=8;local b=40;local c=8;local d=5;local e=0;local f=8;local g=2;local function h()local i={}if checkMonitorSide("top")then table.insert(i,"top")end;if checkMonitorSide("bottom")then table.insert(i,"bottom")end;if checkMonitorSide("left")then table.insert(i,"left")end;if checkMonitorSide("right")then table.insert(i,"right")end;if checkMonitorSide("front")then table.insert(i,"front")end;if checkMonitorSide("back")then table.insert(i,"back")end;return i end;local function checkMonitorSide(j)if peripheral.isPresent(j)then if peripheral.getType(j)=="monitor"then return true end end;return false end;local function k(j)local l,m=peripheral.call(j,"getSize")local n="No"if peripheral.call(j,"isColor")then n="Yes"end;print("Side:"..j.." Size:("..l..", "..m..") Color?"..n)end;local function o()local i=h()if#i==0 then print("No monitors found, add more!")return nill elseif#i==1 then return i[1]else while true do print("Multiple monitors found, please pick one.")for p,q in ipairs(i)do write("["..p.."] ")k(q)end;write("Selection: ")local r=tonumber(io.read())if r<1 or r>#i then print("")print("Invalid number.")else return i[r]end end end end;local function s(t,l,m,u)t.setCursorPos(l,m)t.write(u)end;local function v(t,w,n)for p=1,#w do for x=1,#w[p]do if n then t.setTextColor(w[p][x]["color"])end;s(t,p,x,w[p][x]["char"])end end end;local function y(z,A)local B=A/10;if z<g*B then return colors.gray elseif z<f*B then return colors.green else return colors.lime end end;local function C()local D={"1","2","3","4","5","6","7","8","9","0","!","@","#","$","%","^","&","*","(",")","_","-","+","=","~","`",",","<",">",".","/","?",":","{","}","[","]","\\","\"","\'"}return D[math.random(1,#D)]end;local function E(F)for l=1,#F do for m=1,#F[l]do F[l][m]["curLife"]=F[l][m]["curLife"]-1 end end;for l=1,#F do for m=1,#F[l]do if F[l][m]["type"]=="source"and F[l][m]["curLife"]==0 then F[l][m]["type"]="char"F[l][m]["lifetime"]=math.random(c,b)F[l][m]["curLife"]=F[l][m]["lifetime"]F[l][m]["color"]=colors.lime;if m<#F[l]then F[l][m+1]["char"]=C()F[l][m+1]["lifetime"]=1;F[l][m+1]["curLife"]=1;F[l][m+1]["type"]="source"F[l][m+1]["color"]=colors.white end elseif F[l][m]["curLife"]<0 then F[l][m]["char"]=" "F[l][m]["lifetime"]=0;F[l][m]["curLife"]=0;F[l][m]["type"]="blank"F[l][m]["color"]=colors.black elseif F[l][m]["type"]=="char"then F[l][m]["color"]=y(F[l][m]["curLife"],F[l][m]["lifetime"])end end end;local G=math.random(0-e,d)for p=1,G do local H=math.random(1,#F)F[H][1]["char"]=C()F[H][1]["lifetime"]=1;F[H][1]["curLife"]=1;F[H][1]["type"]="source"F[H][1]["color"]=colors.white end;return F end;local function I(J,K)local L={}for l=1,J do L[l]={}for m=1,K do L[l][m]={}L[l][m]["char"]=" "L[l][m]["lifetime"]=0;L[l][m]["curLife"]=0;L[l][m]["type"]="blank"L[l][m]["color"]=colors.black end end;return L end;local function M()local n=term.isColor()local J,K=term.getSize()local F=I(J,K)while true do F=E(F)v(term,F,n)os.sleep(1/a)end end;M()