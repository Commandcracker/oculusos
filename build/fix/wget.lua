local function a()local b=arg[0]or fs.getName(shell.getRunningProgram())print("Usage:")print(b.." <url> [filename]")print(b.." run <url>")end;local c={...}local d=false;if c[1]=="run"then table.remove(c,1)d=true end;if#c<1 then a()return end;local e=table.remove(c,1)if not http then printError("wget requires the http API")printError("Set http.enabled to true in CC: Tweaked's config")return end;local function f(g)g=g:gsub("[#?].*",""):gsub("/+$","")return g:match("/([^/]+)$")end;local function h(g)local i,j=http.checkURL(e)if not i then printError(j or"Invalid URL.")return end;write("Connecting to "..g.."... ")local k=http.get(g,nil,true)if not k then print("Failed.")return nil end;print("Success.")local l=k.readAll()k.close()return l or""end;if d then local m=h(e)if not m then return end;local n,j=load(m,f(e),"t",_ENV)if not n then printError(j)return end;local i,j=pcall(n,table.unpack(c))if not i then printError(j)end else local o=c[1]or f(e)or e;local p=shell.resolve(o)if fs.exists(p)then print("File already exists")return end;local m=h(e)if not m then return end;local q,j=fs.open(p,"wb")if not q then printError("Cannot save file: "..j)return end;q.write(m)q.close()print("Downloaded as "..o)end